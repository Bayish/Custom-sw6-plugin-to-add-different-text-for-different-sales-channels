(function(){var e={928:function(){},151:function(){},912:function(e,t,n){var s=n(928);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),n(346).Z("6ebc02f4",s,!0,{})},916:function(e,t,n){var s=n(151);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),n(346).Z("0ec16fb9",s,!0,{})},346:function(e,t,n){"use strict";function s(e,t){for(var n=[],s={},i=0;i<t.length;i++){var a=t[i],r=a[0],l={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};s[r]?s[r].parts.push(l):n.push(s[r]={id:r,parts:[l]})}return n}n.d(t,{Z:function(){return m}});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=i&&(document.head||document.getElementsByTagName("head")[0]),l=null,o=0,p=!1,d=function(){},c=null,u="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,n,i){p=n,c=i||{};var r=s(e,t);return _(r),function(t){for(var n=[],i=0;i<r.length;i++){var l=a[r[i].id];l.refs--,n.push(l)}t?_(r=s(e,t)):r=[];for(var i=0;i<n.length;i++){var l=n[i];if(0===l.refs){for(var o=0;o<l.parts.length;o++)l.parts[o]();delete a[l.id]}}}}function _(e){for(var t=0;t<e.length;t++){var n=e[t],s=a[n.id];if(s){s.refs++;for(var i=0;i<s.parts.length;i++)s.parts[i](n.parts[i]);for(;i<n.parts.length;i++)s.parts.push(v(n.parts[i]));s.parts.length>n.parts.length&&(s.parts.length=n.parts.length)}else{for(var r=[],i=0;i<n.parts.length;i++)r.push(v(n.parts[i]));a[n.id]={id:n.id,refs:1,parts:r}}}}function g(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function v(e){var t,n,s=document.querySelector("style["+u+'~="'+e.id+'"]');if(s){if(p)return d;s.parentNode.removeChild(s)}if(h){var i=o++;t=b.bind(null,s=l||(l=g()),i,!1),n=b.bind(null,s,i,!0)}else t=f.bind(null,s=g()),n=function(){s.parentNode.removeChild(s)};return t(e),function(s){s?(s.css!==e.css||s.media!==e.media||s.sourceMap!==e.sourceMap)&&t(e=s):n()}}var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function b(e,t,n,s){var i=n?"":s.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function f(e,t){var n=t.css,s=t.media,i=t.sourceMap;if(s&&e.setAttribute("media",s),c.ssrId&&e.setAttribute(u,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={id:s,exports:{}};return e[s](a,a.exports,n),a.exports}n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/bmadvancedsnippets/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/bmadvancedsnippets/"),function(){"use strict";Shopware.Component.override("sw-settings-snippet-detail",{template:"\n\n{% block sw_settings_snippet_detail_actions_save %}\n        {% block sw_settings_snippet_list_smart_bar_actions_add %}\n            <sw-button\n                    :router-link=\"{\n                        name: 'sw.settings.snippet.variant.list',\n                        params: {key: translationKey},\n                        query: {limit:25, page:1, sortBy:'variant', sortDirection:'ASC', naturalSorting: false}\n                    }\"\n                    v-tooltip.bottom=\"$tc('sw-advanced-snippet.snippet-detail.tooltip')\"\n                    variant=\"primary\"\n            >\n                {{ $tc('sw-advanced-snippet.snippet-detail.title') }}\n            </sw-button>\n        {% endblock %}\n    {% parent %}\n{% endblock %}\n\n\n\n\n\n"}),n(916);let{Component:e,Mixin:t,Data:{Criteria:s}}=Shopware;e.register("sw-settings-snippet-variant-list",{template:'\n{% block sw_settings_snippet_variant_list %}\n    <sw-page class="sw-settings-snippet-variant-list">\n        \n        {% block sw_settings_snippet_variant_list_smart_bar_header %}\n            <template #smart-bar-header>\n                \n                {% block sw_settings_snippet_variant_list_smart_bar_header_title %}\n                    <h2>\n                        \n                        {% block sw_settings_snippet_variant_list_smart_bar_header_title_text %}\n                            {{ $tc(\'sw-settings.index.title\') }}\n                            <sw-icon\n                                    name="regular-chevron-right-xs"\n                                    small\n                            />\n                            {{ $tc(\'sw-settings-snippet.general.mainMenuItemGeneral\') }}\n                            <sw-icon\n                                    name="regular-chevron-right-xs"\n                                    small\n                            />\n                            {{ $tc(\'sw-advanced-snippet.title\') }}\n                        {% endblock %}\n                    </h2>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        \n        {% block sw_settings_snippet_variant_list_actions %}\n            <template #smart-bar-actions>\n                \n                {% block sw_settings_snippet_variant_list_actions_abort %}\n                    <sw-button\n                            :disabled="isLoading"\n                            :router-link="backPath"\n                    >\n                        {{ $tc(\'sw-advanced-snippet.list.button.cancel.text\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block sw_settings_snippet_variant_list_actions_add %}\n                    <sw-button\n                            :router-link="{\n                                name: \'sw.settings.snippet.variant.detail\',\n                                params: { id: \'nope\'},\n                                query: { key: translationKey, isCreateMode: \'true\' }\n                            }"\n                            v-tooltip.bottom="isCreatePossible ? $tc(\'sw-advanced-snippet.list.button.create.tooltipSuccess\'): $tc(\'sw-advanced-snippet.list.button.create.tooltipFailure\')"\n                            variant="primary"\n                            :disabled="!isCreatePossible"\n                    >\n                        {{ $tc(\'sw-advanced-snippet.list.button.create.text\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        \n        {% block sw_settings_snippet_variant_list_card %}\n            <template #content>\n                <sw-card-view>\n                    \n                    {% block sw_settings_snippet_variant_list_card_title %}\n                        <sw-card\n                                position-identifier="sw-settings-snippet-variant-list-title"\n                                class="sw-card--large"\n                        >\n                            <h3>{{ $tc(\'sw-advanced-snippet.list.title\') }}</h3>\n                            <p>{{ $tc(\'sw-advanced-snippet.list.description\') }}</p>\n                        </sw-card>\n                    {% endblock %}\n\n                    \n                    {% block sw_settings_snippet_variant_list_card_list %}\n                        <sw-card\n                                position-identifier="sw-settings-snippet-variant-list-card-list"\n                                :is-loading="isLoading"\n                                :title="$tc(\'sw-advanced-snippet.list.cardTitle\')"\n                                class="sw-card--large"\n                        >\n                            \n                            {% block sw_settings_snippet_variant_list_card_list_grid %}\n                                <template\n                                        #grid\n                                        v-if="!isLoading && snippetVariants.length > 0"\n                                >\n                                    <sw-grid\n                                            ref="snippetVariantList"\n                                            :items="snippetVariants"\n                                            :sort-direction="sortDirection"\n                                            :sort-by="sortBy"\n                                            :selectable="false"\n                                            :allow-inline-edit="false"\n                                            @sort-column="onSortColumn"\n                                            table\n                                    >\n                                        \n                                        {% block sw_settings_snippet_variant_list_card_list_grid_template %}\n                                            <template\n                                                    #columns="{ item }"\n                                            >\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_variant %}\n                                                    <sw-grid-column\n                                                            flex="minmax(200px, 1fr)"\n                                                            class="sw-settings-snippet-variant-list__column-variant"\n                                                            :label="$tc(\'sw-advanced-snippet.list.column.variant\')"\n                                                            data-index="variant"\n                                                            truncate\n                                                            sortable\n                                                    >\n                                                        {{ item.variant }}\n                                                    </sw-grid-column>\n                                                {% endblock %}\n\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_sales_channel %}\n                                                    <sw-grid-column\n                                                            flex="1fr"\n                                                            class="sw-settings-snippet-variant-list__column-sales-channel"\n                                                            :label="$tc(\'sw-advanced-snippet.list.column.salesChannel\')"\n                                                    >\n                                                        {{ getSalesChannel(item.salesChannelId) }}\n                                                    </sw-grid-column>\n                                                {% endblock %}\n\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_base_file %}\n                                                    <sw-grid-column\n                                                            flex="minmax(200px, 1fr)"\n                                                            class="sw-settings-snippet-variant-list__column-base-file"\n                                                            :label="$tc(\'sw-advanced-snippet.list.column.set\')"\n                                                    >\n                                                        {{ getSetName(item.setId) }}\n                                                    </sw-grid-column>\n                                                {% endblock %}\n\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_product_stream %}\n                                                    <sw-grid-column\n                                                            flex="1fr"\n                                                            class="sw-settings-snippet-variant-list__column-product-stream"\n                                                            :label="$tc(\'sw-advanced-snippet.list.column.productStream\')"\n                                                    >\n                                                        {{ getProductStream(item.productStreamId) }}\n                                                    </sw-grid-column>\n                                                {% endblock %}\n\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_base_action %}\n                                                    <sw-grid-column\n                                                            flex="100px"\n                                                            align="center"\n                                                    >\n                                                        \n                                                        {% block sw_settings_snippet_variant_list_card_list_grid_column_base_action_buttons %}\n                                                            <sw-context-button>\n                                                                \n                                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_base_action_btn_edit %}\n                                                                    <sw-context-menu-item\n                                                                            class="sw-setting-snippet-variant-list__edit-action"\n                                                                            :router-link="{\n                                                                                name: \'sw.settings.snippet.variant.detail\',\n                                                                                params: { id: item.id},\n                                                                                query: {key: translationKey, isCreateMode: \'false\'}\n                                                                            }"\n                                                                    >\n                                                                        {{ contextMenuEditSnippet }}\n                                                                    </sw-context-menu-item>\n                                                                {% endblock %}\n\n                                                                \n                                                                {% block sw_settings_snippet_variant_list_card_list_grid_column_base_action_btn_delete %}\n                                                                    <sw-context-menu-item\n                                                                            v-tooltip.left="getNoPermissionsTooltip(\'snippetVariant.deleter\')"\n                                                                            variant="danger"\n                                                                            :disabled="!acl.can(\'snippetVariant.deleter\')"\n                                                                            @click="onDeleteSet(item)"\n                                                                    >\n                                                                        {{ $tc(\'sw-advanced-snippet.list.button.delete.text\') }}\n                                                                    </sw-context-menu-item>\n                                                                {% endblock %}\n                                                            </sw-context-button>\n                                                        {% endblock %}\n                                                    </sw-grid-column>\n                                                {% endblock %}\n\n                                                \n                                                {% block sw_settings_snippet_variant_list_columns_delete_modal %}\n                                                    <sw-modal\n                                                            v-if="showDeleteModal === item"\n                                                            :title="$tc(\'sw-advanced-snippet.list.modal.title\')"\n                                                            variant="small"\n                                                            @modal-close="onCloseDeleteModal"\n                                                    >\n                                                        \n                                                        {% block sw_settings_snippet_variant_list_delete_modal_confirm_delete_text %}\n                                                            <p class="sw-settings-snippet-variant-list__confirm-delete-text">\n                                                                {{ $tc(\'sw-advanced-snippet.list.modal.confirmDelete\', 0, { key: item.variant }) }}\n                                                            </p>\n                                                        {% endblock %}\n\n                                                        \n                                                        {% block sw_settings_snippet_variant_list_delete_modal_footer %}\n                                                            <template #modal-footer>\n                                                                \n                                                                {% block sw_settings_snippet_variant_list_delete_modal_cancel %}\n                                                                    <sw-button\n                                                                            size="small"\n                                                                            @click="onCloseDeleteModal"\n                                                                    >\n                                                                        {{ $tc(\'sw-advanced-snippet.list.button.cancel.text\') }}\n                                                                    </sw-button>\n                                                                {% endblock %}\n\n                                                                \n                                                                {% block sw_settings_snippet_variant_list_delete_modal_confirm %}\n                                                                    <sw-button\n                                                                            variant="danger"\n                                                                            size="small"\n                                                                            @click="onConfirmDelete(item)"\n                                                                    >\n                                                                        {{ $tc(\'sw-advanced-snippet.list.button.delete.text\') }}\n                                                                    </sw-button>\n                                                                {% endblock %}\n                                                            </template>\n                                                        {% endblock %}\n                                                    </sw-modal>\n                                                {% endblock %}\n                                            </template>\n                                        {% endblock %}\n\n                                        \n                                        {% block sw_settings_snippet_variant_list_card_list_grid_pagination %}\n                                            <template #pagination>\n                                                \n                                                {% block sw_settings_snippet_variant_list_card_list_grid_pagination_bar %}\n                                                    <sw-pagination\n                                                            v-bind="{ page, limit, total }"\n                                                            :total-visible="7"\n                                                            @page-change="paginate"\n                                                    />\n                                                {% endblock %}\n                                            </template>\n                                        {% endblock %}\n                                    </sw-grid>\n                                </template>\n                            {% endblock %}\n                        </sw-card>\n                    {% endblock %}\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n\n\n\n\n',inject:["repositoryFactory","acl"],mixins:[t.getByName("listing"),t.getByName("placeholder"),t.getByName("notification")],data(){return{isLoading:!1,snippets:[],salesChannels:[],snippetSets:[],snippetVariants:[],productStreams:[],translationKey:null,sortBy:"variant",sortDirection:"ASC",entityName:"snippet_variant",showDeleteModal:!1,showCloneModal:!1,editing:null,isCreatePossible:!0,offset:0,page:1,limit:25}},metaInfo(){return{title:this.$createTitle()}},computed:{identifier(){return this.translationKey},snippetVariantRepository(){return this.repositoryFactory.create("snippet_variant")},snippetSetRepository(){return this.repositoryFactory.create("snippet_set")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},productStreamRepository(){return this.repositoryFactory.create("product_stream")},snippetSetCriteria(){return new s},snippetVariantCriteria(){let e=new s(this.page,this.limit);return e.addSorting(s.sort(this.sortBy,this.sortDirection)),e.addFilter(s.equals("translationKey",this.translationKey)),e},backPath(){return this.translationKey?{name:"sw.settings.snippet.detail",query:{key:this.translationKey}}:{name:"sw.settings.snippet.index"}},columns(){return this.getColumns()},contextMenuEditSnippet(){return this.acl.can("snippetVariant.editor")?this.$tc("global.default.edit"):this.$tc("global.default.view")}},created(){this.translationKey=this.$route.params.key,this.sortDirection=this.$route.query.sortDirection?this.$route.query.sortDirection:"ASC",this.sortBy=this.$route.query.sortBy?this.$route.query.sortBy:"variant",this.createdComponents()},methods:{createdComponents(){this.isLoading=!0;let e=[];e.push(this.salesChannelRepository.search(new s,Shopware.Context.api),this.snippetSetRepository.search(this.snippetSetCriteria,Shopware.Context.api),this.productStreamRepository.search(new s,Shopware.Context.api),this.snippetVariantRepository.search(this.snippetVariantCriteria,Shopware.Context.api)),Promise.all(e).then(e=>{this.salesChannels=e[0],this.snippetSets=e[1],this.productStreams=e[2],this.snippetVariants=e[3],this.total=e[3].total,this.isCreatePossible=this.salesChannels.length*this.snippetSets.length+this.salesChannels.length*this.snippetSets.length*this.productStreams.length>this.snippetVariants.length}).finally(()=>{this.isLoading=!1})},getSalesChannel(e){return this.salesChannels.find(t=>t.id===e).name},getSetName(e){return this.snippetSets.find(t=>t.id===e).name},getProductStream(e){return this.productStreams.find(t=>t.id===e)?this.productStreams.find(t=>t.id===e).name:""},onDeleteSet(e){this.showDeleteModal=e},onConfirmDelete(e){return this.snippetVariantRepository.delete(e.id).then(()=>{this.createdComponents(),this.createDeleteSuccessNote()}).catch(()=>{this.createDeleteErrorNote()}).finally(()=>{this.onCloseDeleteModal()})},getNoPermissionsTooltip(e,t=!0){return{showDelay:300,appearance:"dark",showOnDisabledElements:t,disabled:this.acl.can(e),message:this.$tc("sw-privileges.tooltip.warning")}},createDeleteSuccessNote(){this.createNotificationSuccess({message:this.$tc("sw-advanced-snippet.list.message.delete.success")})},createDeleteErrorNote(){this.createNotificationError({message:this.$tc("sw-advanced-snippet.list.message.delete.error")})},onCloseDeleteModal(){this.showDeleteModal=!1},onSortColumn(e){"ASC"===this.sortDirection&&e.dataIndex===this.sortBy?this.sortDirection="DESC":this.sortDirection="ASC",this.updateRoute({sortDirection:this.sortDirection,sortBy:e.dataIndex}),this.createdComponents()},paginate({page:e,limit:t}){this.page=e,this.limit=t,this.createdComponents()}}}),n(912);let{Component:i,Mixin:a,Data:{Criteria:r}}=Shopware;i.register("sw-settings-snippet-variant-detail",{template:'\n{% block sw_settings_snippet_variant_detail %}\n    <sw-page class="sw-settings-snippet-detail">\n        {% block sw_settings_snippet_variant_detail_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ isCreateMode ? $tc(\'sw-advanced-snippet.detail.title.create\') : $tc(\'sw-advanced-snippet.detail.title.edit\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        \n        {% block sw_settings_snippet_variant_detail_actions %}\n            <template #smart-bar-actions>\n                \n                {% block sw_settings_snippet_variant_detail_actions_abort %}\n                    <sw-button\n                            :disabled="isLoading"\n                            :router-link="backPath"\n                    >\n                        {{ $tc(\'sw-settings-snippet.detail.buttonCancel\') }}\n                    </sw-button>\n                {% endblock %}\n\n                \n                {% block sw_settings_snippet_variant_detail_actions_save %}\n                    <sw-button-process\n                            class="sw-snippet-detail__save-action"\n                            :is-loading="isLoading"\n                            :processSuccess="processSuccess"\n                            variant="primary"\n                            @click="onSave"\n                            :disabled="processSuccess"\n                    >\n                        {{ $tc(\'sw-settings-snippet.detail.buttonSave\') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n\n        \n        {% block sw_settings_snippet_variant_detail_content %}\n            <template #content>\n                <sw-card-view>\n                    <template v-if="!isLoading">\n                        <sw-card\n                                position-identifier="sw-settings-snippet-variant-edit"\n                        >\n                            {% block sw_settings_snippet_variant_detail_type %}\n                                <sw-select-field\n                                        v-model:value="type"\n                                        v-if="isCreateMode"\n                                        :label="$tc(\'sw-advanced-snippet.detail.label.type\')"\n                                        :placeholder="$tc(\'sw-advanced-snippet.detail.placeholder.type\')"\n                                        :required="isCreateMode"\n                                        @update:value="onChangeType"\n                                >\n                                    <option\n                                            v-for="(t, i) in types"\n                                            :key="i"\n                                            :value="t"\n                                            :selected="type && t === type"\n                                    >\n                                        {{ t }}\n                                    </option>\n                                </sw-select-field>\n                            {% endblock %}\n\n\n                            {% block sw_settings_snippet_variant_detail_sales_channel %}\n                                <sw-select-field\n                                        v-model:value="updatedVariant.salesChannelId"\n                                        :label="$tc(\'sw-advanced-snippet.detail.label.salesChannel\')"\n                                        :placeholder="$tc(\'sw-advanced-snippet.detail.placeholder.salesChannel\')"\n                                        @update:value="filterItems(type, isCreateMode, \'salesChannels\')"\n                                        :disabled="isCreateMode && (filteredSalesChannels.length < 1 || type === null)"\n                                        required\n                                >\n                                    <option\n                                            v-for="(salesChannel, index) in filteredSalesChannels"\n                                            :key="index"\n                                            :value="salesChannel.id"\n                                            @update:value="onChangeSalesChannel(salesChannel.id)"\n                                            :selected="updatedVariant.salesChannelId && salesChannel.id === updatedVariant.salesChannelId"\n                                    >\n                                        {{ salesChannel.name }}\n                                    </option>\n                                </sw-select-field>\n                            {% endblock %}\n\n                            {% block sw_settings_snippet_variant_detail_set %}\n                                <sw-select-field\n                                        v-model:value="updatedVariant.setId"\n                                        :label="$tc(\'sw-advanced-snippet.detail.label.set\')"\n                                        :placeholder="$tc(\'sw-advanced-snippet.detail.placeholder.set\')"\n                                        @update:value="filterItems(type, isCreateMode, \'snippetSets\')"\n                                        :disabled="isCreateMode && (filteredSnippetSets.length < 1 || type === null)"\n                                        required\n                                >\n                                    <option\n                                            v-for="(snippetSet, index) in filteredSnippetSets"\n                                            :key="index"\n                                            :value="snippetSet.id"\n                                            :selected="updatedVariant.setId && snippetSet.id === updatedVariant.setId"\n                                    >\n                                        {{ snippetSet.name }}\n                                    </option>\n                                </sw-select-field>\n                            {% endblock %}\n\n                            {% block sw_settings_snippet_variant_detail_set %}\n                                <sw-select-field\n                                        v-if="type === \'For specific product group\'"\n                                        v-model:value="updatedVariant.productStreamId"\n                                        :label="$tc(\'sw-advanced-snippet.detail.label.productStream\')"\n                                        :placeholder="$tc(\'sw-advanced-snippet.detail.placeholder.productStream\')"\n                                        @update:value="filterItems(type, isCreateMode, \'productStreams\')"\n                                        :disabled="isCreateMode && (filteredProductStreams.length < 1 || type === null)"\n                                        :required="type === \'For specific product group\'"\n                                >\n                                    <option\n                                            v-for="(stream, index) in filteredProductStreams"\n                                            :key="index"\n                                            :value="stream.id"\n                                            :selected="updatedVariant.productStreamId && stream.id === updatedVariant.productStreamId"\n                                    >\n                                        {{ stream.name }}\n                                    </option>\n                                </sw-select-field>\n                            {% endblock %}\n\n                            {% block sw_settings_snippet_variant_detail %}\n                                <sw-text-field\n                                        v-model:value="updatedVariant.variant"\n                                        :disabled="isCreateMode && type === null"\n                                        :value="updatedVariant.variant"\n                                        :label="$tc(\'sw-advanced-snippet.detail.label.variant\')"\n                                        :placeholder="$tc(\'sw-advanced-snippet.detail.placeholder.variant\')"\n                                />\n                            {% endblock %}\n                        </sw-card>\n                    </template>\n                    <template v-else>\n                        <sw-skeleton/>\n                        <sw-skeleton/>\n                    </template>\n                </sw-card-view>\n            </template>\n        {% endblock %}\n\n    </sw-page>\n{% endblock %}\n\n',inject:["repositoryFactory","snippetVariant"],mixins:[a.getByName("notification")],data(){return{isLoading:!1,isCreateMode:!1,types:["For whole sales channel","For specific product group"],type:null,translationKey:null,salesChannels:[],snippetVariants:[],snippetSets:[],productStreams:[],updatedVariant:null,processSuccess:!1,filteredSalesChannels:[],filteredSnippetSets:[],filteredProductStreams:[]}},computed:{productStreamRepository(){return this.repositoryFactory.create("product_stream")},snippetSetRepository(){return this.repositoryFactory.create("snippet_set")},snippetVariantRepository(){return this.repositoryFactory.create("snippet_variant")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},snippetSetCriteria(){let e=new r(1,25);return e.addSorting(r.sort("name","ASC")),this.term&&e.setTerm(this.term),e},snippetVariantCriteria(){let e=new r;return e.addFilter(r.equals("translationKey",this.translationKey)),e},backPath(){return this.translationKey?{name:"sw.settings.snippet.variant.list",params:{key:this.$route.query.key}}:{name:"sw.settings.snippet.index"}}},created(){this.translationKey=this.$route.query.key,this.isCreateMode="true"===this.$route.query.isCreateMode,this.prepareContent()},methods:{prepareContent(){this.isLoading=!0;let e=[];e.push(this.snippetSetRepository.search(this.snippetSetCriteria),this.salesChannelRepository.search(new r),this.snippetVariantRepository.search(this.snippetVariantCriteria,Shopware.Context.api),this.productStreamRepository.search(new r)),this.isCreateMode||e.push(this.snippetVariantRepository.get(this.$route.params.id,Shopware.Context.api,new r)),Promise.all(e).then(e=>{this.snippetSets=e[0],this.salesChannels=e[1],this.snippetVariants=e[2],this.productStreams=e[3],this.isCreateMode?this.onChangeType():(this.updatedVariant=e[4],this.type=null!==this.updatedVariant.productStreamId?"For specific product group":"For whole sales channel",this.filterItems(this.type,this.isCreateMode,"salesChannels"),this.filterItems(this.type,this.isCreateMode,"snippetSets"),this.filterItems(this.type,this.isCreateMode,"productStreams"))}).finally(()=>{this.isLoading=!1})},onSave(){if(this.isCreateMode){let e=this.snippetVariantRepository.create();e.setId=this.updatedVariant.setId,e.salesChannelId=this.updatedVariant.salesChannelId,e.translationKey=this.translationKey,e.variant=this.updatedVariant.variant,"For specific product group"===this.type&&(e.productStreamId=this.updatedVariant.productStreamId),this.snippetVariantRepository.save(e,Shopware.Context.api,new r).then(t=>{this.createInlineSuccessNote("sw-advanced-snippet.detail.message.create.success",e.variant),this.processSuccess=!0}).catch(e=>{this.createInlineErrorNote(this.$tc("sw-advanced-snippet.detail.message.create.error",0,{error:e.message})),this.prepareContent()}).finally(()=>{this.isLoading=!1})}else{let e=Object.values(this.snippetVariants).find(e=>e.id===this.updatedVariant.id);!0!==this.deepEqual(e,this.updatedVariant)&&(this.isLoading=!0,this.snippetVariantRepository.save(this.updatedVariant,Shopware.Context.api).then(()=>{this.createInlineSuccessNote("sw-advanced-snippet.detail.message.edit.success",this.updatedVariant.variant),this.processSuccess=!0}).catch(e=>{this.createInlineErrorNote(this.$tc("sw-advanced-snippet.detail.message.create.error",0,{error:e.message}),this.updatedVariant.variant),this.prepareContent()}).finally(()=>{this.isLoading=!1}))}},onChangeType(){this.filteredSalesChannels=this.salesChannels,console.log(this.filteredSalesChannels,this.type),this.filteredSnippetSets=this.snippetSets,this.filteredProductStreams=this.productStreams,this.updatedVariant={setId:null,salesChannelId:null,variant:null,productStreamId:null}},createInlineSuccessNote(e,t){this.createNotificationSuccess({message:this.$tc(e,0,{name:t})})},createInlineErrorNote(e,t){this.createNotificationError({message:this.$tc(e,null!==t,{name:t})})},deepEqual(e,t){let n=Object.keys(e),s=Object.keys(t);return!n.salesChannelId===s.salesChannelId&&n.setId===s.setId&&n.variant===s.variant},filterItems(e,t,n){let s=this.snippetVariants,i=this.updatedVariant,a=["salesChannels","snippetSets","productStreams"],r=["filteredSalesChannels","filteredSnippetSets","filteredProductStreams"],l=["salesChannelId","setId","productStreamId"],o=a.indexOf(n);for(let p=0;p<a.length;p++)if(p!==o){let d=a[p],c=a.filter(e=>e!==n&&e!==d)[0],u=l[p],h=l[o],m=l[a.indexOf(c)];"For whole sales channel"===e?this[r[p]]=this.filterBySalesChannel(t,s,i,d,u,h,m):"For specific product group"===e&&(this[r[p]]=this.filterBySpecificGroup(t,s,i,d,c,u,h,m)),this[r[p]].length<1&&p<1&&this.createInlineErrorNote("sw-advanced-snippet.detail.message.warning","Not possible")}},filterBySalesChannel(e,t,n,s,i,a,r){let l=t.filter(e=>e[a]===n[a]&&null===e[r]);return this[s].filter(t=>{let s=l.find(e=>e[i]===t.id);if(!e){let e=l.find(e=>t.id===e[i]&&n.id===e.id);return!s||e}return!s})},filterBySpecificGroup(e,t,n,s,i,a,r,l){if(null!==n&&null!==n[l])return this[s].filter(s=>{let i=t.find(e=>s.id===e[a]&&e[r]===n[r]&&e[l]===n[l]);if(!e){let e=t.find(e=>s.id===e[a]&&n.id===e.id);return!i||e}return!i});{let e=t.filter(e=>e[r]===n[r]&&null!==e[l]);return this[s].filter(t=>e.filter(e=>e[a]===t.id).length<this[i].length)}}}});var l=JSON.parse('{"sw-advanced-snippet":{"title":"Varianten","snippet-detail":{"title":"Varianten","tooltip":"Snippets Varianten"},"general":{"name":"Snippets f\xfcr Vertriebskanal","menu-item-name":"Vertriebskanal","menu-item-description":"Vertriebskanal","title":"Neue Variante hinzuf\xfcgen"},"list":{"title":"Snippet Varianten","description":"Verwalten Sie Ihren Snippet pro Vertriebskanal und pro Dynamische Produktgruppe","cardTitle":"Die Varianten","column":{"salesChannel":"Vertriebskanal","set":"Snippet Set","productStream":"Dynamische Gruppe","variant":"Variante"},"button":{"cancel":{"text":"Abbrechen"},"create":{"text":"Variante erstellen","tooltipSuccess":"Neue Variante hinzuf\xfcgen","tooltipFailure":"Es ist nicht m\xf6glich zu erstellen"},"delete":{"text":"L\xf6schen"}},"message":{"delete":{"success":"Sie haben erfolgreich gel\xf6scht!","error":"Etwas ist schiefgelaufen!"}},"modal":{"title":"Warnung","confirmDelete":"M\xf6chten Sie die Variante \\"{key}\\" wirklich l\xf6schen?"}},"detail":{"title":{"create":"Variante erstellen","edit":"Variante bearbeiten"},"label":{"type":"Art der Snippet variante.","salesChannel":"Vertriebskanal","set":"Sprachpaket (Snippet Set)","productStream":"Dynamische Gruppe","variant":"Text der Snippet variante"},"placeholder":{"type":"W\xe4hlen Sie die Art Ihrer Snippet variante aus","salesChannel":"Vertriebskanal ausw\xe4hlen","set":"Sprachpaket ausw\xe4hlen","productStream":"Dynamische Gruppe ausw\xe4hlen","variant":"Text...."},"message":{"create":{"success":"Sie haben erfolgreich erstellt","error":"Etwas ist schiefgelaufen \\"{error}\\""},"edit":{"success":"Sie haben erfolgreich bearbeitet","error":"Etwas ist schiefgelaufen \\"{error}\\""},"warning":"Es ist nicht erlaubt, eine Snippet variante mit diesem ausgew\xe4hlten Element zu erstellen. \xc4ndern Sie das Element oder gehen Sie zu Varianten, um zu bearbeiten oder zu l\xf6schen!"}}}}'),o=JSON.parse('{"sw-advanced-snippet":{"title":"Variants","snippet-detail":{"title":"Variants","tooltip":"Snippet Variants"},"general":{"name":"Snippets for sales channel","menu-item-name":"Sales channel","menu-item-description":"Sales channel","title":"Add new variant"},"list":{"title":"Snippet variants","description":"Manage your snippet pro Sales Channel and pro Dynamic Product Group","cardTitle":"The variants","column":{"salesChannel":"Sales Channel","set":"Snippet set","productStream":"Dynamic Group","variant":"Variant"},"button":{"cancel":{"text":"Cancel"},"create":{"text":"Create variant","tooltipSuccess":"Add new variant","tooltipFailure":"it is not possible to create"},"delete":{"text":"Delete"}},"message":{"delete":{"success":"You deleted successfully!","error":"Something went wrong!"}},"modal":{"title":"Warning","confirmDelete":"Are you sure you want to delete the variant \\"{key}\\"?"}},"detail":{"title":{"create":"Create variant","edit":"Edit variant"},"label":{"type":"Type of snippet variant.","salesChannel":"Sales channel","set":"Language pack(Snippet set)","productStream":"Dynamic group","variant":"Text of snippet variant"},"placeholder":{"type":"Select type of your snippet variant","salesChannel":"Select sales channel","set":"Select language pack","productStream":"Select dynamic group","variant":"Text...."},"message":{"create":{"success":"You created successfully","error":"Something went wrong \\"{error}\\""},"edit":{"success":"You edited successfully","error":"Something went wrong \\"{error}\\""},"warning":"You are not allowed to create snippet variant with this selected item. Change item or go to variants to edit or delete!"}}}}');Shopware.Module.register("sw-settings-snippet-variant",{color:"#ff3d58",icon:"default-shopping-paper-bag-product",title:"My custom module",description:"Manage your custom snippets for subshop here",snippets:{"de-DE":l,"en-GB":o},routes:{list:{component:"sw-settings-snippet-variant-list",path:"list/:key",meta:{parentPath:"sw.settings.snippet.detail"}},detail:{component:"sw-settings-snippet-variant-detail",path:"detail/:id",meta:{parentPath:"sw.settings.snippet.variant.list"}}}});let p=Shopware.Classes.ApiService;var d=class extends p{constructor(e,t,n="snippet"){super(e,t,n),this.name="snippetVariant"}};let{Application:c}=Shopware;c.addServiceProvider("snippetVariant",e=>new d(c.getContainer("init").httpClient,e.loginService))}()})();